---
title:  "增值税发票查验平台不显示验证码的原因及解决方式"
date:   2020-08-28
tags:
  - tax
  - chrome
  - f12
---

查验发票的时候遇到了验证码不显示的问题，一番研究后发现一些可能对以后有帮助的东西，主要是理解一些网络问题，网页交互逻辑之类的。

原文链接：https://www.bianshd.cn/post/11.html

在日常工作中，我们经常需要用到国家税务总局的增值税发票查验平台查询发票真伪等信息，但有一些人会发现，即使我们已经按照要求安装好了根证书，自己的浏览器还是显示不出来验证码，但有时候换个浏览器却又能正常显示，稍微注意我们就会发现，出现这种情况的都是谷歌浏览器（chrome）或国产浏览器的用户，而市面绝大多数国产浏览器都把谷歌内核做为其浏览器的默认内核。

这是为什么呢？

原来，为了让更多用户了解使用SHA-1证书的不安全性和HTTP明文页面的不安全性。自2017年1月底开始，谷歌发布的Chrome 56及其以后版本的浏览器把SHA-1证书显示为“无效HTTPS” ，把涉及敏感信息输入的HTTP页面标记为“HTTP不安全”。而我们的国税总局的发票检验平台虽然采用了HTTPS协议，但其HTTPS证书却采用了SHA-1的加密方式进行加密，被谷歌浏览器或其内核判定为“无效的HTTPS”，在其拉取验证码时进行了阻止。

所以，我们要正常使用查验平台，可以采用以下三种方式：

一、使用用老版（56及其以前版本）的谷歌或其内核浏览器。

二、使用用IE或EDGE浏览器。

三、国产浏览器切换到兼容模式（即IE内核，不同浏览器名称可能不同）。



当然，如果我们非要用新版谷歌浏览器（也不新了，市面大部分浏览器谷歌内核版本都在56以后了）查发票，也可以做到，方法如下：

一、输入完发票代码、发票号码、开票日期等信息后，需要显示验证码时，按F12键，浏览器页面下部（或弹窗）会出现调试窗口。

二、鼠标右键点击调试窗口出现的链接，在出现的菜单中点击“Open in new tab”在新选项卡中打开。

![console.png](https://xuzikuan12.github.io/images/tax/201906201561038427135203.png)

三、当新打开页面中出现类似如下一堆字符时，关闭此页面，切换回查询页面，你会发现，验证码已经出现了。经此操作后，只要浏览器程序不退出，就可以任意查询都可以正常显示验证码。当浏览器关闭后再打开，就又得重复此操作步骤了。

![new tab.png](https://xuzikuan12.github.io/images/tax/201906201561038427512990.png)

